# Website

This website is built using [Docusaurus 2](https://docusaurus.io/), a modern static website generator.

### Installation

```
$ yarn
```

### Local Development

```
$ yarn start
```

This command starts a local development server and opens up a browser window. Most changes are reflected live without having to restart the server.

### Build

```
$ yarn build
```

This command generates static content into the `build` directory and can be served using any static contents hosting service.

### Deployment

Using SSH:

```
$ USE_SSH=true yarn deploy
```

Not using SSH:

```
$ GIT_USER=<Your GitHub username> yarn deploy
```

If you are using GitHub pages for hosting, this command is a convenient way to build the website and push to the `gh-pages` branch.

#### Troubleshooting

##### `USE_SSH=true yarn deploy` or `docusaurus start` or `docusaurus build` Fails

If the error looks like the following:

```
../lexical/src/LexicalSelection.ts:2216:3 - error TS2578: Unused '@ts-expect-error' directive.

2216   // @ts-expect-error Selection.modify() method applies a change to the current selection or cursor position,
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
       
...

Error: DocSidebarNavbarItem: Sidebar with ID "api" doesn't have anything to be linked to.
[ERROR] Unable to build website for locale en.
[ERROR] Error: Failed to compile with errors.
    at /Users/jackjack/Desktop/github/lexical/node_modules/@docusaurus/core/lib/webpack/utils.js:180:24
    at /Users/jackjack/Desktop/github/lexical/node_modules/webpack/lib/MultiCompiler.js:554:14
    at processQueueWorker (/Users/jackjack/Desktop/github/lexical/node_modules/webpack/lib/MultiCompiler.js:491:6)
    at processTicksAndRejections (node:internal/process/task_queues:78:11)
[INFO] Docusaurus version: 2.3.1
Node version: v16.17.0
error Command failed with exit code 1.
```

Lexical documentation uses [TypeDoc plugin](https://www.npmjs.com/package/docusaurus-plugin-typedoc) to generate code
documentations, which will be placed under `packages/lexical-website/docs/api`. Next,
[Docusaurus autogenerated sidebar](https://docusaurus.io/docs/sidebar/autogenerated) attempts to pick this location to
construct its "API" section shown on website.

**If TypeDoc fails to parse the source code, no api folder will be generated** and Docusaurus sidebar will complain that
it cannot find such directory as "api/". 

Simply fix the TS linting error above shall fix the problem