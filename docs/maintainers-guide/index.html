<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-maintainers-guide" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.0"><title data-rh=true>Maintainers' Guide | Lexical</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://lexical.dev/docs/maintainers-guide><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Maintainers' Guide | Lexical"><meta data-rh=true name=description content="This is the grimoire of arcane knowledge covering the overall organization"><meta data-rh=true property=og:description content="This is the grimoire of arcane knowledge covering the overall organization"><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://lexical.dev/docs/maintainers-guide><link data-rh=true rel=alternate href=https://lexical.dev/docs/maintainers-guide hreflang=en><link data-rh=true rel=alternate href=https://lexical.dev/docs/maintainers-guide hreflang=x-default><link data-rh=true rel=preconnect href=https://YRGKJK6OMH-dsn.algolia.net crossorigin=anonymous><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="Lexical RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="Lexical Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-7C6YYBYBBT"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7C6YYBYBBT",{})</script><link rel=search type=application/opensearchdescription+xml title=Lexical href=/opensearch.xml><link rel=stylesheet href=/assets/css/styles.ae5be95c.css><script src=/assets/js/runtime~main.fc4581b9.js defer></script><script src=/assets/js/main.ab9576ef.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id=internaldocs-banner></div><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_G6ar href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt=Lexical class="themedComponent_DHUr themedComponent--light_DIHH"><img src=/img/logo-dark.svg alt=Lexical class="themedComponent_DHUr themedComponent--dark_Bv2M"></div></a><a href=https://playground.lexical.dev/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Playground</a><a class="navbar__item navbar__link" href=/docs/intro>Docs</a><a class="navbar__item navbar__link" href=/docs/api/>API</a><a class="navbar__item navbar__link" href=/community>Community</a><a href=https://facebook.github.io/lexical-ios/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">iOS<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a><a class="navbar__item navbar__link" href=/gallery>Gallery</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/QubitPi/lexical target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a><a href=https://github.com/facebook/lexical-ios target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">iOS GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a><div class="toggle_OLSw colorModeToggle_Hg9V"><button class="clean-btn toggleButton_wYmb toggleButtonDisabled_vaDU" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_KEbZ lightToggleIcon_Sxwe"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_KEbZ darkToggleIcon_Yem1"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_KEbZ systemToggleIcon_txm5"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_bmvg><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_UyTV"><div class=docsWrapper_XLvK><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_z1FD" type=button></button><div class=docRoot_HciC><main class="docMainContainer_namt docMainContainerEnhanced_sRjM"><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_YAwJ"><div class=docItemContainer_Rv5Z><article><div class="tocCollapsible_O_Qc theme-doc-toc-mobile tocMobile_tjDr"><button type=button class="clean-btn tocCollapsibleButton_htYj">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Maintainers' Guide</h1></header>
<p>This is the grimoire of arcane knowledge covering the overall organization
of the Lexical monorepo, including its conventions, quirks, and
configurations.</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id=monorepo-organization>Monorepo Organization<a href=#monorepo-organization class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=workspaces>Workspaces<a href=#workspaces class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>The top-level <code>package.json</code> uses
<a href=https://docs.npmjs.com/cli/v10/using-npm/workspaces target=_blank rel="noopener noreferrer">npm workspaces</a> to
configure the monorepo. This mostly means that all packages share a
top-level <code>package-lock.json</code> and <code>npm run {command} -w {package}</code> is often
used to run a command from a nested package's package.json.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=private>Private<a href=#private class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Some packages in the monorepo do not get published to npm, for example:</p>
<ul>
<li><code>packages/lexical-devtools</code> - browser extension for working with Lexical
sites</li>
<li><code>packages/lexical-playground</code> - the
<a href=https://playground.lexical.dev/ target=_blank rel="noopener noreferrer">playground.lexical.dev</a> demo site</li>
<li><code>packages/lexical-website</code> - the <a href=https://lexical.dev/ target=_blank rel="noopener noreferrer">lexical.dev</a>
docusaurus website that you may even be reading right now</li>
<li><code>packages/shared</code> - internal code that is used by more than one repository
but should not be a public API</li>
</ul>
<p>It is required that these packages, and any other package that should not be
published to npm, have a <code>"private": true</code> property in their <code>package.json</code>.
If you have an in-progress package that will eventually be public, but is
not ready for consumption, it should probably still be set to
<code>"private": true</code> otherwise the tooling will find it and publish it.</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id=package-naming-conventions>Package naming conventions<a href=#package-naming-conventions class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=overall>Overall<a href=#overall class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<table><thead><tr><th>Usage<th>Convention<tbody><tr><td>Directory name<td><code>packages/lexical-package-name</code><tr><td>Entrypoint<td><code>packages/lexical-package-name/src/index.{ts,tsx}</code><tr><td>Flow types<td><code>packages/lexical-package/flow/LexicalPackageName.js.flow</code><tr><td>package.json name<td><code>@lexical/package-name</code><tr><td>Documentation<td><code>packages/lexical-package-name/README.md</code><tr><td>Unit Tests<td><code>packages/lexical-package-name/src/__tests__/unit/LexicalPackageName.test.{ts,tsx}</code><tr><td>dist (gitignore'd build product)<td><code>packages/lexical-package-name/dist</code><tr><td>npm (gitignore'd prerelease product)<td><code>packages/lexical-package-name/npm</code><tr><td>www entrypoint<td><code>packages/lexical-package-name/LexicalPackageName.js</code></table>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=multiple-module-export-lexicalreact>Multiple module export (@lexical/react)<a href=#multiple-module-export-lexicalreact class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Instead of having a single module, some packages may have many modules
(currently only <code>@lexical/react</code>) that are each exported separately.
In that scenario, there should be no <code>index.ts</code> entrypoint file and every module
at the top-level should be an entrypoint. All entrypoints should be a
TypeScript file, not a subdirectory containing an index.ts file.</p>
<p>The <a href=#npm-run-update-packages>update-packages</a> script will ensure that the
exports match the files on disk.</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id=creating-a-new-package>Creating a new package<a href=#creating-a-new-package class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>The first step in creating a new package is to create the workspace, there
is a <a href=https://docs.npmjs.com/cli/v10/commands/npm-init target=_blank rel="noopener noreferrer">npm-init</a> template
that will fill in some of the defaults for you based on conventions.</p>
<p>The example we will use is the steps that were used to create the
<code>lexical-eslint-plugin</code>, which will be published to npm as
<code>@lexical/eslint-plugin</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=create-the-workspace>Create the workspace<a href=#create-the-workspace class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-text codeBlockContainer_ZGJx theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_kX1v><pre tabindex=0 class="prism-code language-text codeBlock_TAPP thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_AdAo><span class=token-line style=color:#393A34><span class="token plain">npm init -w packages/lexical-eslint-plugin</span><br></span></code></pre></div></div>
<p>This only automates the first step, creating a single file:</p>
<details class="details_B4FW alert alert--info details_SZgV" data-collapsed=true><summary><p><code>packages/lexical-eslint-plugin/package.json</code></summary><div><div class=collapsibleContent_VYua><div class="language-json codeBlockContainer_ZGJx theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_kX1v><pre tabindex=0 class="prism-code language-json codeBlock_TAPP thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_AdAo><span class=token-line style=color:#393A34><span class="token plain">{</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "name": "@lexical/eslint-plugin",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "description": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "keywords": [</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "lexical",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "editor"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  ],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "version": "0.14.3",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "license": "MIT",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "repository": {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "type": "git",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "url": "git+https://github.com/facebook/lexical.git",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "directory": "packages/lexical-eslint-plugin"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "main": "LexicalEslintPlugin.js",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "types": "index.d.ts",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "bugs": {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "url": "https://github.com/facebook/lexical/issues"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "homepage": "https://github.com/facebook/lexical#readme"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<p>Some next steps for this package.json before moving on:</p>
<ul>
<li>Update the description</li>
<li>Add appropriate keywords</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=create-the-initial-source-file>Create the initial source file<a href=#create-the-initial-source-file class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-text codeBlockContainer_ZGJx theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_kX1v><pre tabindex=0 class="prism-code language-text codeBlock_TAPP thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_AdAo><span class=token-line style=color:#393A34><span class="token plain">mkdir -p packages/lexical-eslint-plugin/src</span><br></span><span class=token-line style=color:#393A34><span class="token plain">code packages/lexical-eslint-plugin/src/index.ts</span><br></span></code></pre></div></div>
<p>Here are some minimal examples of those files that you might start out with.
I've elided the license header, the eslint header/header fixer will help you
with that!</p>
<details class="details_B4FW alert alert--info details_SZgV" data-collapsed=true><summary><p><code>packages/lexical-eslint-plugin/src/index.ts</code></summary><div><div class=collapsibleContent_VYua><div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_kX1v><pre tabindex=0 class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_AdAo><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain">name</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> version</span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'../package.json'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> plugin </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  meta</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain">name</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> version</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  rules</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>export</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>default</span><span class="token plain"> plugin</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=run-update-packages-to-generate-boilerplate-docs--config>Run update-packages to generate boilerplate docs & config<a href=#run-update-packages-to-generate-boilerplate-docs--config class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-text codeBlockContainer_ZGJx theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_kX1v><pre tabindex=0 class="prism-code language-text codeBlock_TAPP thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_AdAo><span class=token-line style=color:#393A34><span class="token plain">npm run update-packages</span><br></span></code></pre></div></div>
<p>This will set up the tsconfig, flow, etc. configuration to recognize your
new module. It will also create an initial README.md using only the
description from the package.json.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=create-an-initial-unit-test>Create an initial unit test<a href=#create-an-initial-unit-test class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<div class="language-text codeBlockContainer_ZGJx theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_kX1v><pre tabindex=0 class="prism-code language-text codeBlock_TAPP thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_AdAo><span class=token-line style=color:#393A34><span class="token plain">mkdir -p packages/lexical-eslint-plugin/src/__tests__/unit</span><br></span><span class=token-line style=color:#393A34><span class="token plain">code packages/lexical-eslint-plugin/src/__tests__/unit/LexicalEslintPlugin.test.ts</span><br></span></code></pre></div></div>
<details class="details_B4FW alert alert--info details_SZgV" data-collapsed=true><summary><p><code>packages/lexical-eslint-plugin/src/__tests__/unit/LexicalEslintPlugin.test.ts</code></summary><div><div class=collapsibleContent_VYua><div class="language-typescript codeBlockContainer_ZGJx theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_kX1v><pre tabindex=0 class="prism-code language-typescript codeBlock_TAPP thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_AdAo><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> plugin </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'@lexical/eslint-plugin'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>describe</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'LexicalEslintPlugin'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token function" style=color:#d73a49>it</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>'exports a plugin with meta and rules'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>expect</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Object</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>keys</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">plugin</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>sort</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>toMatchObject</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>[</span><span class="token string" style=color:#e3116c>'meta'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'rules'</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id=scripts-for-development>Scripts for development<a href=#scripts-for-development class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-update-packages>npm run update-packages<a href=#npm-run-update-packages class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>This script runs: update-version, update-tsconfig, update-flowconfig,
create-docs, and create-www-stubs. This is safe to do at any time and will
ensure that package.json files are all at the correct versions, paths are
set up correctly for module resolution of all public exports, and that
various defaults are filled in.</p>
<p>These scripts can be run individually, but unless you're working on one
of these scripts you might as well run them all.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-prepare-release>npm run prepare-release<a href=#npm-run-prepare-release class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>This runs all of the pre-release steps and will let you inspect the artifacts
that would be uploaded to npm. Each public package will have a npm directory, e.g.
<code>packages/lexical/npm</code> that contains those artifacts.</p>
<p>This will also update scripts/error-codes/codes.json, the mapping of
production error codes to error messages. It's imperative to commit the result
of this before tagging a release.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-ci-check>npm run ci-check<a href=#npm-run-ci-check class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Check flow, TypeScript, prettier and eslint for issues. A good command to run
after committing (which will auto-fix most prettier issues) and before pushing
a PR.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-flow>npm run flow<a href=#npm-run-flow class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Check the Flow types</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-tsc>npm run tsc<a href=#npm-run-tsc class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Check the TypeScript types</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-tsc-extension>npm run tsc-extension<a href=#npm-run-tsc-extension class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Check the TypeScript types of the lexical-devtools extension</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-test-unit>npm run test-unit<a href=#npm-run-test-unit class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Run the unit tests</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-lint>npm run lint<a href=#npm-run-lint class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Run eslint</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id=scripts-for-release-managers>Scripts for release managers<a href=#scripts-for-release-managers class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-extract-codes>npm run extract-codes<a href=#npm-run-extract-codes class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>This will run a build that also extracts the generated error codes.json file.</p>
<p>This should be done, at minimum, before each release, but not in any PR as
it would cause conflicts between serial numbers.</p>
<p>It's safe and probably advisable to do this more often, possibly any time a
branch is merged to main.</p>
<p>The codes.json file is also updated any time a release build is generated
as a failsafe to ensure that these codes are up to date in a release.
This command runs a development build to extract the codes which is much
faster as it is not doing any optimization/minification steps.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-increment-version>npm run increment-version<a href=#npm-run-increment-version class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Increment the monorepo version. The <code>-i</code> argument must be one of
<code>minor</code> | <code>patch</code> | <code>prerelease</code>.</p>
<p>The postversion script will:</p>
<ul>
<li>Create a local <code>${npm_package_version}__release</code> branch</li>
<li><code>npm run update-version</code> to update example and sub-package monorepo dependencies</li>
<li><code>npm install</code> to update the package-lock.json</li>
<li><code>npm run update-packages</code> to update other generated config</li>
<li><code>npm run extract-codes</code> to extract the error codes</li>
<li><code>npm run update-changelog</code> to update the changelog (if it's not a prerelease)</li>
<li>Create a version commit and tag from the branch</li>
</ul>
<p>This is typically executed through the <code>version.yml</code> GitHub Workflow which
will also push the tag and branch.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-changelog>npm run changelog<a href=#npm-run-changelog class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p>Update the changelog from git history.</p>
<h3 class="anchor anchorWithStickyNavbar_fF9Z" id=npm-run-release>npm run release<a href=#npm-run-release class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h3>
<p><em>Prerequisites:</em> all of the previous release manager scripts,
plus creating a tag in git, and likely other steps.</p>
<p>Runs prepare-release to do a full build and then uploads to npm.</p>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id=release-procedure>Release Procedure<a href=#release-procedure class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<p>This is the current release procedure for public releases, at least as of
May 2024 (~0.15.0).</p>
<p>The main branch should be "frozen" during this procedure (no other PRs should
be merged during this time). This avoids a mismatch between the contents of
the GitHub release (created from main in step 1) and the NPM release (created
from main in step 4).</p>
<ol>
<li>Create a new version with the Github Actions "Create New Release Branch" workflow (<code>version.yml</code>)</li>
<li>Raise a PR against version branch created by that action</li>
<li>After PR is approved with passing tests, merge PR</li>
<li>After PR is merged to main, publish to NPM with the Github Actions "Publish to NPM" workflow (<code>pre-release.yml</code>)</li>
<li>Create a GitHub release from the tag created in step 1, manually editing the release notes</li>
<li>Announce the release in #announcements on Discord</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_fF9Z" id=release-protocol>Release Protocol<a href=#release-protocol class=hash-link aria-label="Direct link to heading" title="Direct link to heading">​</a></h2>
<ol>
<li>All PRs with breaking changes must have <code>[Breaking Change]</code> in the PR's title with documentation of what followup actions consumers of the lexical library need to be aware of.</li>
<li>Monthly releases happen on the last week of the month, with a minor increment (eg. v0.20+1.0).</li>
<li>Anything in between will be a patch increment (eg. 0.20.0+1), unless there is a breaking change.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/QubitPi/lexical/tree/main/packages/lexical-website/docs/maintainers-guide.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_UohW aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_g62E"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_TN1Q thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#monorepo-organization class="table-of-contents__link toc-highlight">Monorepo Organization</a><ul><li><a href=#workspaces class="table-of-contents__link toc-highlight">Workspaces</a><li><a href=#private class="table-of-contents__link toc-highlight">Private</a></ul><li><a href=#package-naming-conventions class="table-of-contents__link toc-highlight">Package naming conventions</a><ul><li><a href=#overall class="table-of-contents__link toc-highlight">Overall</a><li><a href=#multiple-module-export-lexicalreact class="table-of-contents__link toc-highlight">Multiple module export (@lexical/react)</a></ul><li><a href=#creating-a-new-package class="table-of-contents__link toc-highlight">Creating a new package</a><ul><li><a href=#create-the-workspace class="table-of-contents__link toc-highlight">Create the workspace</a><li><a href=#create-the-initial-source-file class="table-of-contents__link toc-highlight">Create the initial source file</a><li><a href=#run-update-packages-to-generate-boilerplate-docs--config class="table-of-contents__link toc-highlight">Run update-packages to generate boilerplate docs & config</a><li><a href=#create-an-initial-unit-test class="table-of-contents__link toc-highlight">Create an initial unit test</a></ul><li><a href=#scripts-for-development class="table-of-contents__link toc-highlight">Scripts for development</a><ul><li><a href=#npm-run-update-packages class="table-of-contents__link toc-highlight">npm run update-packages</a><li><a href=#npm-run-prepare-release class="table-of-contents__link toc-highlight">npm run prepare-release</a><li><a href=#npm-run-ci-check class="table-of-contents__link toc-highlight">npm run ci-check</a><li><a href=#npm-run-flow class="table-of-contents__link toc-highlight">npm run flow</a><li><a href=#npm-run-tsc class="table-of-contents__link toc-highlight">npm run tsc</a><li><a href=#npm-run-tsc-extension class="table-of-contents__link toc-highlight">npm run tsc-extension</a><li><a href=#npm-run-test-unit class="table-of-contents__link toc-highlight">npm run test-unit</a><li><a href=#npm-run-lint class="table-of-contents__link toc-highlight">npm run lint</a></ul><li><a href=#scripts-for-release-managers class="table-of-contents__link toc-highlight">Scripts for release managers</a><ul><li><a href=#npm-run-extract-codes class="table-of-contents__link toc-highlight">npm run extract-codes</a><li><a href=#npm-run-increment-version class="table-of-contents__link toc-highlight">npm run increment-version</a><li><a href=#npm-run-changelog class="table-of-contents__link toc-highlight">npm run changelog</a><li><a href=#npm-run-release class="table-of-contents__link toc-highlight">npm run release</a></ul><li><a href=#release-procedure class="table-of-contents__link toc-highlight">Release Procedure</a><li><a href=#release-protocol class="table-of-contents__link toc-highlight">Release Protocol</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/intro>Introduction</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://discord.gg/KmG4wQnnD9 target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://stackoverflow.com/questions/tagged/lexicaljs target=_blank rel="noopener noreferrer" class=footer__link-item>Stack Overflow<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://twitter.com/lexicaljs target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/facebook/lexical target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Legal</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://opensource.facebook.com/legal/privacy/ target=_blank rel="noreferrer noopener" class=footer__link-item>Privacy<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opensource.facebook.com/legal/terms/ target=_blank rel="noreferrer noopener" class=footer__link-item>Terms<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_awgD><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2025 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>